import{r as k,j as s}from"./shadcn-BWI-zYLE.js";import{o as y,B as f,p as B,q as S,r as C}from"./index-BatLQ3bG.js";import{C as A}from"./checkbox-_CVchsYD.js";function E({slot:e,isOpen:t,erInteraktiv:a,currentUser:l,overrideTitle:r,leftPrefix:n}){const c=`${e.startTid.slice(0,2)}-${e.sluttTid.slice(0,2)}`,i=!!e.arrangementTittel,[d,u]=k.useState(!1);k.useEffect(()=>{const x=()=>u(window.innerWidth<640);return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const g=40,m=e.arrangementBeskrivelse&&d&&e.arrangementBeskrivelse.length>g?e.arrangementBeskrivelse.slice(0,g)+"...":e.arrangementBeskrivelse;return s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:"flex flex-1 items-center justify-between min-w-0",children:[s.jsxs("div",{className:"flex items-center min-w-0",children:[n?s.jsx("div",{className:"mr-2 whitespace-nowrap text-xs text-muted-foreground flex items-center gap-1",children:n}):null,s.jsx("div",{className:"whitespace-nowrap font-semibold text-sm text-right pr-1",children:c}),n?null:s.jsx("div",{className:"w-[18px] h-[18px] flex items-center justify-center",children:e.værSymbol?s.jsx("img",{src:`/banebooking-voyager-fe/weather-symbols/svg/${e.værSymbol}.svg`,alt:e.værSymbol,width:18,height:18,className:"select-none",draggable:!1}):s.jsx("span",{className:"invisible",children:"."})}),s.jsx("div",{className:"flex-grow text-sm p-1 min-w-0",children:r?s.jsx("div",{className:"min-w-0 whitespace-nowrap truncate",children:r}):i?s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:e.arrangementTittel}),m?s.jsx("div",{className:"text-xs text-gray-600 truncate",children:m}):null]}):s.jsx("div",{className:"min-w-0 whitespace-nowrap truncate",children:e.booketAv?l?e.booketAv:$(e.booketAv):"Ledig"})})]}),a?s.jsx("div",{className:"p-1 shrink-0",children:s.jsx(y,{size:12,style:{transform:t?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},"aria-hidden":"true"})}):s.jsx("div",{className:"p-1 shrink-0"})]})})}function $(e){const[t,a]=e.split("@");return!t||!a?e:`${t[0]}***@${a}`}function T({slot:e,onBook:t=()=>{},onCancel:a=()=>{},onDelete:l=()=>{},time:r,erBekreftet:n,setErBekreftet:c,reset:i=()=>{}}){return s.jsxs("div",{className:"flex flex-col items-end w-full",children:[e.kanBookes&&n!==void 0&&c&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-1 mb-2 text-sm",children:[s.jsx(A,{id:`book-${r}`,checked:n,onCheckedChange:d=>c(!!d)}),s.jsxs("label",{htmlFor:`book-${r}`,className:"cursor-pointer select-none",children:["Jeg (og de jeg spiller sammen med) har betalt medlemskap for ",new Date().getFullYear()]})]}),s.jsxs(f,{variant:"outline",size:"sm",disabled:!n,onClick:()=>{t(e),i()},className:"flex items-center gap-2 text-sm",children:[s.jsx(B,{}),"Book"]})]}),e.kanAvbestille&&s.jsxs(f,{variant:"outline",size:"sm",onClick:()=>{a(e),i()},className:"flex items-center gap-2 text-sm",children:[s.jsx(S,{}),"Avbestill"]}),e.kanSlette&&s.jsxs(f,{variant:"destructive",size:"sm",onClick:()=>{l(e),i()},className:"flex items-center gap-2 text-sm",children:[s.jsx(C,{}),"Slett"]})]})}function F({slot:e,time:t,erBekreftet:a,setErBekreftet:l,onBook:r,onCancel:n,onDelete:c,reset:i}){return s.jsx("div",{className:"mt-1",children:s.jsx("div",{className:"bg-inherit",children:s.jsx(T,{slot:e,time:t,erBekreftet:a,setErBekreftet:l,onBook:r,onCancel:n,onDelete:c,reset:i})})})}function D({slot:e,currentUser:t,isOpen:a=!1,onToggle:l,onBook:r=()=>{},onCancel:n=()=>{},onDelete:c=()=>{},headerOverrideTitle:i,headerLeftPrefix:d,erInteraktivOverride:u}){const[g,m]=k.useState(!1),x=()=>m(!1),j=`${e.startTid.slice(0,2)}-${e.sluttTid.slice(0,2)}`,p=e.kanBookes||e.kanAvbestille||e.kanSlette,o=u??(!!t&&p&&!e.erPassert),v=!!e.arrangementTittel,w=e.erEier===!0,N=["border rounded shadow-sm p-2 mb-2","transition-colors duration-300 ease-in-out",e.erPassert?"bg-gray-100 text-gray-400":"",!e.erPassert&&v?"bg-gradient-to-r from-blue-0 via-blue-50 to-blue-200 border-blue-200":"",!e.erPassert&&!v?"bg-white text-gray-900":"",t&&w&&!v?"animate__animated animate__headShake animate__slow":""].join(" "),b=()=>{o&&l&&(l(),m(!1))};return s.jsxs("div",{className:N,style:{cursor:o?"pointer":"default",opacity:e.erPassert?.5:1},onClick:h=>{h.target.closest("button, input, label")||b()},role:o?"button":void 0,tabIndex:o?0:void 0,onKeyDown:h=>{o&&(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),b())},children:[s.jsx(E,{slot:e,isOpen:a,erInteraktiv:o,currentUser:t,overrideTitle:i,leftPrefix:d}),a&&!e.erPassert&&s.jsx(F,{slot:e,time:j,erBekreftet:g,setErBekreftet:m,onBook:r,onCancel:n,onDelete:c,reset:x})]})}export{D as B};
