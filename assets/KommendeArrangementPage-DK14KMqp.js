import{r as u,j as e}from"./shadcn-CWEYZx5G.js";import{d as p,S as b,L as v,B as A}from"./index-BlyKwakQ.js";import{u as D}from"./useArrangement-TPvsuw3U.js";import{C as f,a as N}from"./card-ze9r6Rdg.js";import{T as k,a as C,b as d,c as t,d as T,e as a,f as r}from"./index-BsKzJOE1.js";import{A as y,a as w,b as H,c as S,d as B,e as E,f as I,g as K,h as L}from"./alert-dialog-ZI6n_8kJ.js";import"./react-D5d5vywP.js";import"./lucide-BJMfYTUr.js";import"./useBaner-Bnyfb3hI.js";function G(){const{slug:m}=p(),c=u.useContext(b)??m,{arrangementer:l,isLoading:x,slettArrangement:g,sletterArrangementId:i}=D(c),n=l.some(s=>s.kanSlettes);return e.jsxs("div",{className:"max-w-screen-md mx-auto px-2 py-4",children:[e.jsx("h1",{className:"text-xl font-semibold mb-4",children:"Kommende arrangementer"}),e.jsx(f,{children:e.jsx(N,{className:"p-4 space-y-4",children:x?e.jsx(v,{}):l.length===0?e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Ingen arrangementer registrert."}):e.jsx("div",{className:"overflow-auto max-h-[60vh] border-b border-x rounded-b-md",children:e.jsxs(k,{className:"text-sm",children:[e.jsx(C,{children:e.jsxs(d,{children:[e.jsx(t,{className:"w-1/3",children:"Hva"}),e.jsx(t,{className:"w-1/3",children:"Når"}),e.jsx(t,{children:"Om"}),n&&e.jsx(t,{className:"text-right",children:"Handling"})]})}),e.jsx(T,{children:l.map(s=>{const h=new Date(s.startDato),j=new Date,o=Math.max(0,Math.ceil((h.getTime()-j.getTime())/(1e3*60*60*24)));return e.jsxs(d,{children:[e.jsxs(a,{className:"whitespace-normal break-words",children:[e.jsx("div",{className:"font-medium",children:s.tittel}),s.beskrivelse&&e.jsx("div",{className:"text-muted-foreground text-xs",children:s.beskrivelse})]}),e.jsx(a,{className:"text-sm",children:s.startDato===s.sluttDato?r(s.startDato):`${r(s.startDato)} - ${r(s.sluttDato)}`}),e.jsxs(a,{children:[o," ",o===1?"dag":"dager"]}),n&&e.jsx(a,{className:"text-right",children:s.kanSlettes&&e.jsxs(y,{children:[e.jsx(w,{asChild:!0,children:e.jsx(A,{variant:"destructive",size:"sm",children:"Avlys"})}),e.jsxs(H,{children:[e.jsxs(S,{children:[e.jsx(B,{children:"Avlys arrangement"}),e.jsxs(E,{children:["Er du sikker på at du vil avlyse «",s.tittel,"»? Alle tilknyttede bookinger vil slettes."]})]}),e.jsxs(I,{children:[e.jsx(K,{children:"Avbryt"}),e.jsx(L,{disabled:i===s.id,onClick:()=>g(s.id),children:i===s.id?"Avlyser...":"Ja, avlys"})]})]})]})})]},s.id)})})]})})})})]})}export{G as default};
