import{r as m,j as e}from"./shadcn-nsGv8pGm.js";import{u as j,T as u,a as f,b as x,c as o,d as p,e as d}from"./table-CKsAuSpY.js";import{B as h,L as D,q as v}from"./index-CEYMlDzC.js";import{f as c}from"./datoUtils-Bzity_GL.js";import{A,a as b,b as w,c as N,d as y,e as T,f as k,g as C,h as S}from"./alert-dialog-DMLbJCjB.js";import{P as H}from"./Page-Cvsn-K9O.js";import"./react-RGnvvjkK.js";import"./useBaner-OUooAADc.js";import"./lucide-ByRD2J1s.js";import"./index-BEQRqDzz.js";function B({tittel:l,onSlett:i,trigger:n}){const[s,r]=m.useState(!1),[t,a]=m.useState(!1),g=async()=>{a(!0);try{await i(),r(!1)}catch{}finally{a(!1)}};return e.jsxs(A,{open:s,onOpenChange:r,children:[e.jsx(b,{asChild:!0,children:n}),e.jsxs(w,{children:[e.jsxs(N,{children:[e.jsx(y,{children:"Avlys arrangement"}),e.jsxs(T,{children:["Er du sikker på at du vil avlyse «",l,"»? Alle tilknyttede bookinger vil slettes."]})]}),e.jsxs(k,{children:[e.jsx(C,{disabled:t,children:"Avbryt"}),e.jsx(S,{asChild:!0,children:e.jsx(h,{variant:"destructive",disabled:t,onClick:g,children:t?"Avlyser...":"Ja, avlys"})})]})]})]})}function q(){const{arrangementer:l,isLoading:i,slettArrangement:n}=j();return e.jsx(H,{children:i?e.jsx(D,{}):l.length===0?e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Ingen arrangementer registrert."}):e.jsx("div",{className:"max-w-full overflow-x-auto border rounded-md",children:e.jsxs(u,{className:"text-sm w-full",children:[e.jsx(f,{children:e.jsxs(x,{children:[e.jsx(o,{className:"w-1/3",children:"Hva"}),e.jsx(o,{className:"w-1/3",children:"Når"}),e.jsx(o,{className:"w-1/3",children:"Om"})]})}),e.jsx(p,{children:l.map(s=>{const r=new Date(s.startDato),t=new Date,a=Math.max(0,Math.ceil((r.getTime()-t.getTime())/(1e3*60*60*24)));return e.jsxs(x,{children:[e.jsx(d,{className:"whitespace-normal break-words",children:e.jsxs("div",{className:"flex justify-between items-start gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.tittel}),s.beskrivelse&&e.jsx("div",{className:"text-muted-foreground text-xs",children:s.beskrivelse})]}),s.kanSlettes&&e.jsx(B,{tittel:s.tittel,onSlett:()=>n(s.id),trigger:e.jsxs(h,{variant:"ghost",size:"icon",className:"text-red-500 hover:bg-red-100",title:"Avlys",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{className:"sr-only",children:"Avlys"})]})})]})}),e.jsx(d,{className:"whitespace-normal break-words text-sm",children:s.startDato===s.sluttDato?c(s.startDato):`${c(s.startDato)} - ${c(s.sluttDato)}`}),e.jsxs(d,{children:[a," ",a===1?"dag":"dager"]})]},s.id)})})]})})})}export{q as default};
