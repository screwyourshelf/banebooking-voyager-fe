import{j as a,r as b}from"./shadcn-C7L97JSy.js";import{d as h,g as j,h as R,L as F,B as T,t as k,o as C}from"./index-3TgM-pJG.js";import{F as f,C as E,a as L}from"./FieldWrapper-C86oTohC.js";import{F as u}from"./FormField-C7sfSCIZ.js";import{S}from"./SelectField-rKsER-wy.js";import"./react-D5d5vywP.js";import"./lucide-CAh2A4Ey.js";import"./index-BswtpnY1.js";function y({className:o,...n}){return a.jsx("textarea",{"data-slot":"textarea",className:h("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",o),...n})}function N({id:o,label:n,value:s,onChange:l,helpText:r,error:i}){return a.jsx(f,{id:o,label:n,helpText:r,error:i,children:a.jsx(y,{id:o,value:s,onChange:l,className:i?"border-destructive":""})})}function c({id:o,label:n,value:s,onChange:l,min:r=0,max:i=10,step:g=1,helpText:m,error:t}){return a.jsx(f,{id:o,label:`${n}: ${s}`,helpText:m,error:t,children:a.jsx("input",{id:o,type:"range",value:s,min:r,max:i,step:g,onChange:e=>l(parseInt(e.target.value)),className:"w-full"})})}function z(){const{slug:o}=j(),{klubb:n,laster:s}=R(o),[l,r]=b.useState({navn:"",kontaktEpost:"",banereglement:"",latitude:"",longitude:"",feedUrl:"",bookingRegel:{maksPerDag:1,maksTotalt:2,dagerFremITid:7,slotLengdeMinutter:60}}),[i,g]=b.useState(!1);b.useEffect(()=>{var t,e,d,p,x,v;n&&r({navn:n.navn,kontaktEpost:n.kontaktEpost??"",banereglement:n.banereglement??"",latitude:((t=n.latitude)==null?void 0:t.toString())??"",longitude:((e=n.longitude)==null?void 0:e.toString())??"",feedUrl:n.feedUrl??"",bookingRegel:{maksPerDag:((d=n.bookingRegel)==null?void 0:d.maksPerDag)??1,maksTotalt:((p=n.bookingRegel)==null?void 0:p.maksTotalt)??2,dagerFremITid:((x=n.bookingRegel)==null?void 0:x.dagerFremITid)??7,slotLengdeMinutter:((v=n.bookingRegel)==null?void 0:v.slotLengdeMinutter)??60}})},[n]);async function m(t){t.preventDefault(),g(!0);const e={...l};if(e.bookingRegel.maksTotalt<e.bookingRegel.maksPerDag){k.error("Totalt antall bookinger kan ikke vÃ¦re lavere enn maks per dag."),g(!1);return}try{await C(o,{navn:e.navn,kontaktEpost:e.kontaktEpost,banereglement:e.banereglement,latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude),feedUrl:e.feedUrl,bookingRegel:{...e.bookingRegel}}),k.success("Endringer lagret")}catch(d){k.error(d instanceof Error?d.message:"Ukjent feil")}g(!1)}return s?a.jsx(F,{}):n?a.jsx("div",{className:"max-w-screen-sm mx-auto px-2 py-2",children:a.jsx("form",{onSubmit:m,className:"space-y-4",children:a.jsx(E,{children:a.jsxs(L,{className:"p-4 space-y-4",children:[a.jsx(u,{id:"navn",label:"Navn",value:l.navn,onChange:t=>r(e=>({...e,navn:t.target.value}))}),a.jsx(u,{id:"kontaktEpost",label:"Kontakt-e-post",type:"email",value:l.kontaktEpost,onChange:t=>r(e=>({...e,kontaktEpost:t.target.value}))}),a.jsx(N,{id:"banereglement",label:"Banereglement",value:l.banereglement,onChange:t=>r(e=>({...e,banereglement:t.target.value}))}),a.jsx(u,{id:"latitude",label:"Latitude",value:l.latitude,onChange:t=>r(e=>({...e,latitude:t.target.value}))}),a.jsx(u,{id:"longitude",label:"Longitude",value:l.longitude,onChange:t=>r(e=>({...e,longitude:t.target.value}))}),a.jsx(u,{id:"feedUrl",label:"RSS-feed (valgfritt)",value:l.feedUrl,onChange:t=>r(e=>({...e,feedUrl:t.target.value}))}),a.jsxs("div",{className:"space-y-3 pt-2",children:[a.jsx("h3",{className:"text-sm font-medium",children:"Bookingregler"}),a.jsx(c,{id:"maksPerDag",label:"Maks bookinger per dag",value:l.bookingRegel.maksPerDag,onChange:t=>r(e=>({...e,bookingRegel:{...e.bookingRegel,maksPerDag:t}})),min:0,max:5}),a.jsx(c,{id:"maksTotalt",label:"Maks aktive bookinger totalt",value:l.bookingRegel.maksTotalt,onChange:t=>r(e=>({...e,bookingRegel:{...e.bookingRegel,maksTotalt:t}})),min:0,max:10}),a.jsx(c,{id:"dagerFremITid",label:"Dager frem i tid tillatt",value:l.bookingRegel.dagerFremITid,onChange:t=>r(e=>({...e,bookingRegel:{...e.bookingRegel,dagerFremITid:t}})),min:1,max:14}),a.jsx(S,{id:"slotLengdeMinutter",label:"Slot-lengde (minutter)",value:l.bookingRegel.slotLengdeMinutter.toString(),onChange:t=>r(e=>({...e,bookingRegel:{...e.bookingRegel,slotLengdeMinutter:parseInt(t)}})),options:[{label:"30 minutter",value:"30"},{label:"45 minutter",value:"45"},{label:"60 minutter",value:"60"},{label:"90 minutter",value:"90"}],disabled:!0})]}),a.jsx("div",{className:"pt-2",children:a.jsx(T,{type:"submit",size:"sm",disabled:i,children:i?"Lagrer...":"Lagre endringer"})})]})})})}):a.jsx("p",{className:"text-sm text-destructive px-2 py-2 text-center",children:"Fant ikke klubb."})}export{z as default};
