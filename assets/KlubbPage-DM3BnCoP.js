import{j as t,r as g}from"./shadcn-DDUjAgUv.js";import{u as c}from"./useSlug-DGcvY4vP.js";import{P as k}from"./Page-Cq3gZojq.js";import{S as j}from"./SimpleTabsLazy-Cch1SZpp.js";import{j as h,u as m,L as b,B as p}from"./index-DPErGzPN.js";import{a as f,F as d}from"./FormField-CghnZKEh.js";import{S}from"./SelectField-BUzE6hnx.js";import"./react-RGnvvjkK.js";import"./lucide-Bc72fHhV.js";import"./index-XHTm-vMi.js";function L({className:r,...i}){return t.jsx("textarea",{"data-slot":"textarea",className:h("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),...i})}function C({id:r,label:i,value:o,onChange:s,helpText:a,error:l}){return t.jsx(f,{id:r,label:i,helpText:a,error:l,children:t.jsx(L,{id:r,value:o,onChange:s,className:l?"border-destructive":""})})}function F({slug:r}){const{data:i,isLoading:o,oppdaterKlubb:s}=m(r),[a,l]=g.useState({navn:"",kontaktEpost:"",banereglement:"",latitude:"",longitude:"",feedUrl:""});return g.useEffect(()=>{i&&l({navn:i.navn??"",kontaktEpost:i.kontaktEpost??"",banereglement:i.banereglement??"",latitude:i.latitude?.toString()??"",longitude:i.longitude?.toString()??"",feedUrl:i.feedUrl??""})},[i]),o||!i?t.jsx(b,{}):t.jsxs("form",{className:"space-y-4",onSubmit:e=>{e.preventDefault(),s.mutate({...i,navn:a.navn,kontaktEpost:a.kontaktEpost,banereglement:a.banereglement,latitude:parseFloat(a.latitude),longitude:parseFloat(a.longitude),feedUrl:a.feedUrl})},children:[t.jsx(d,{id:"navn",label:"Navn",value:a.navn,onChange:e=>l(n=>({...n,navn:e.target.value}))}),t.jsx(d,{id:"kontaktEpost",label:"Kontakt-e-post",type:"email",value:a.kontaktEpost,onChange:e=>l(n=>({...n,kontaktEpost:e.target.value}))}),t.jsx(C,{id:"banereglement",label:"Banereglement",value:a.banereglement,onChange:e=>l(n=>({...n,banereglement:e.target.value}))}),t.jsx(d,{id:"latitude",label:"Latitude",value:a.latitude,onChange:e=>l(n=>({...n,latitude:e.target.value}))}),t.jsx(d,{id:"longitude",label:"Longitude",value:a.longitude,onChange:e=>l(n=>({...n,longitude:e.target.value}))}),t.jsx(d,{id:"feedUrl",label:"RSS-feed (valgfritt)",value:a.feedUrl,onChange:e=>l(n=>({...n,feedUrl:e.target.value}))}),t.jsx(p,{type:"submit",size:"sm",disabled:s.isPending,children:s.isPending?"Lagrer...":"Lagre endringer"})]})}function u({id:r,label:i,value:o,onChange:s,min:a=0,max:l=10,step:e=1,helpText:n,error:v}){return t.jsx(f,{id:r,label:`${i}: ${o}`,helpText:n,error:v,children:t.jsx("input",{id:r,type:"range",value:o,min:a,max:l,step:e,onChange:x=>s(parseInt(x.target.value)),className:"w-full"})})}function T({slug:r}){const{data:i,isLoading:o,oppdaterKlubb:s}=m(r),[a,l]=g.useState({maksPerDag:1,maksTotalt:2,dagerFremITid:7,slotLengdeMinutter:60,aapningstid:"07:00",stengetid:"22:00"});return g.useEffect(()=>{i?.bookingRegel&&l({...a,...i.bookingRegel})},[i]),o||!i?t.jsx(b,{}):t.jsxs("form",{className:"space-y-4",onSubmit:e=>{e.preventDefault(),s.mutate({...i,bookingRegel:a})},children:[t.jsx(u,{id:"aapningstid",label:"Ã…pningstid",value:parseInt(a.aapningstid.split(":")[0]),onChange:e=>l(n=>({...n,aapningstid:`${e.toString().padStart(2,"0")}:00`})),min:6,max:23}),t.jsx(u,{id:"stengetid",label:"Stengetid",value:parseInt(a.stengetid.split(":")[0]),onChange:e=>l(n=>({...n,stengetid:`${e.toString().padStart(2,"0")}:00`})),min:6,max:23}),t.jsx(u,{id:"maksPerDag",label:"Maks bookinger per dag",value:a.maksPerDag,onChange:e=>l(n=>({...n,maksPerDag:e})),min:0,max:5}),t.jsx(u,{id:"maksTotalt",label:"Maks aktive bookinger totalt",value:a.maksTotalt,onChange:e=>l(n=>({...n,maksTotalt:e})),min:0,max:10}),t.jsx(u,{id:"dagerFremITid",label:"Dager frem i tid",value:a.dagerFremITid,onChange:e=>l(n=>({...n,dagerFremITid:e})),min:1,max:14}),t.jsx(S,{id:"slotLengdeMinutter",label:"Slot-lengde (minutter)",value:a.slotLengdeMinutter.toString(),onChange:e=>l(n=>({...n,slotLengdeMinutter:parseInt(e)})),options:[{label:"30 minutter",value:"30"},{label:"45 minutter",value:"45"},{label:"60 minutter",value:"60"},{label:"90 minutter",value:"90"}],disabled:!0}),t.jsx(p,{type:"submit",size:"sm",disabled:s.isPending,children:s.isPending?"Lagrer...":"Lagre endringer"})]})}function R(){const[r,i]=g.useState("info"),o=c();return t.jsx(k,{children:t.jsx(j,{items:[{value:"info",label:"Informasjon",content:t.jsx(F,{slug:o})},{value:"booking",label:"Bookingregler",content:t.jsx(T,{slug:o})}],value:r,onValueChange:i})})}export{R as default};
