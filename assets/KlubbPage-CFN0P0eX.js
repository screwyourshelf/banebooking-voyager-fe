import{r as u,j as n}from"./shadcn-DDUjAgUv.js";import{u as v}from"./useSlug-DipqLcgr.js";import{P as x}from"./Page-Cq3gZojq.js";import{S}from"./SimpleTabsLazy-2FTM8ipJ.js";import{f as b,L as m,B as p}from"./index-VZYxSd3S.js";import{F as g,a as h}from"./FormField-D5-NoD76.js";import{T as j}from"./TextareaField-DDR9vy49.js";import{S as c}from"./SelectField-kiQGWT2z.js";import"./react-RGnvvjkK.js";import"./lucide-Bc72fHhV.js";import"./index-XHTm-vMi.js";function T({slug:o}){const{data:l,isLoading:i,oppdaterKlubb:s}=b(o),[a,r]=u.useState({navn:"",kontaktEpost:"",banereglement:"",latitude:"",longitude:"",feedUrl:"",feedSynligAntallDager:"7"});return u.useEffect(()=>{l&&r({navn:l.navn??"",kontaktEpost:l.kontaktEpost??"",banereglement:l.banereglement??"",latitude:l.latitude?.toString()??"",longitude:l.longitude?.toString()??"",feedUrl:l.feedUrl??"",feedSynligAntallDager:l.feedSynligAntallDager?.toString()??"50"})},[l]),i||!l?n.jsx(m,{}):n.jsxs("form",{className:"space-y-4",onSubmit:e=>{e.preventDefault(),s.mutate({...l,navn:a.navn,kontaktEpost:a.kontaktEpost,banereglement:a.banereglement,latitude:parseFloat(a.latitude),longitude:parseFloat(a.longitude),feedUrl:a.feedUrl,feedSynligAntallDager:parseInt(a.feedSynligAntallDager,10)})},children:[n.jsx(g,{id:"navn",label:"Klubbnavn",value:a.navn,onChange:e=>r(t=>({...t,navn:e.target.value})),helpText:"Navnet på klubben slik det vises utad i Banebooking."}),n.jsx(g,{id:"kontaktEpost",label:"Kontakt-e-post",type:"email",value:a.kontaktEpost,onChange:e=>r(t=>({...t,kontaktEpost:e.target.value})),helpText:"E-postadresse som vises på klubbens infoside. Brukes til henvendelser fra medlemmer og gjester."}),n.jsx(j,{id:"banereglement",label:"Banereglement",value:a.banereglement,onChange:e=>r(t=>({...t,banereglement:e.target.value})),helpText:"Tekst som beskriver klubbens regler for bruk av banene. Vises til brukere når de booker."}),n.jsx(g,{id:"latitude",label:"Latitude (breddegrad)",value:a.latitude,onChange:e=>r(t=>({...t,latitude:e.target.value})),helpText:"Breddegrad for klubbens beliggenhet. Brukes til kartvisning."}),n.jsx(g,{id:"longitude",label:"Longitude (lengdegrad)",value:a.longitude,onChange:e=>r(t=>({...t,longitude:e.target.value})),helpText:"Lengdegrad for klubbens beliggenhet. Brukes til kartvisning."}),n.jsx(g,{id:"feedUrl",label:"RSS-feed (valgfritt)",value:a.feedUrl,onChange:e=>r(t=>({...t,feedUrl:e.target.value})),helpText:"URL til klubbens RSS-feed (f.eks. nyheter). Hvis satt, hentes og vises de nyeste innleggene i appen."}),n.jsx(g,{id:"feedSynligAntallDager",label:"Aldergrense for feedinnslag (dager)",type:"number",min:0,value:a.feedSynligAntallDager,onChange:e=>r(t=>({...t,feedSynligAntallDager:e.target.value})),helpText:"Bestemmer hvor mange dager gamle innslag fra klubbens RSS-feed som skal vises. Sett til 0 for å inkludere alle."}),n.jsx(p,{type:"submit",size:"sm",disabled:s.isPending,children:s.isPending?"Lagrer...":"Lagre endringer"})]})}function d({id:o,label:l,value:i,onChange:s,min:a=0,max:r=10,step:e=1,helpText:t,error:f}){return n.jsx(h,{id:o,label:`${l}: ${i}`,helpText:t,error:f,children:n.jsx("input",{id:o,type:"range",value:i,min:a,max:r,step:e,onChange:k=>s(parseInt(k.target.value)),className:"w-full"})})}function y({slug:o}){const{data:l,isLoading:i,oppdaterKlubb:s}=b(o),[a,r]=u.useState({maksPerDag:1,maksTotalt:2,dagerFremITid:7,slotLengdeMinutter:60,aapningstid:"07:00",stengetid:"22:00"});return u.useEffect(()=>{l?.bookingRegel&&r({...a,...l.bookingRegel})},[l]),i||!l?n.jsx(m,{}):n.jsxs("form",{className:"space-y-4",onSubmit:e=>{e.preventDefault(),s.mutate({...l,bookingRegel:a})},children:[n.jsx(d,{id:"aapningstid",label:"Åpningstid",value:parseInt(a.aapningstid.split(":")[0]),onChange:e=>r(t=>({...t,aapningstid:`${e.toString().padStart(2,"0")}:00`})),min:6,max:23}),n.jsx(d,{id:"stengetid",label:"Stengetid",value:parseInt(a.stengetid.split(":")[0]),onChange:e=>r(t=>({...t,stengetid:`${e.toString().padStart(2,"0")}:00`})),min:6,max:23}),n.jsx(d,{id:"maksPerDag",label:"Maks bookinger per dag",value:a.maksPerDag,onChange:e=>r(t=>({...t,maksPerDag:e})),min:0,max:5}),n.jsx(d,{id:"maksTotalt",label:"Maks aktive bookinger totalt",value:a.maksTotalt,onChange:e=>r(t=>({...t,maksTotalt:e})),min:0,max:10}),n.jsx(d,{id:"dagerFremITid",label:"Dager frem i tid",value:a.dagerFremITid,onChange:e=>r(t=>({...t,dagerFremITid:e})),min:1,max:14}),n.jsx(c,{id:"slotLengdeMinutter",label:"Slot-lengde (minutter)",value:a.slotLengdeMinutter.toString(),onChange:e=>r(t=>({...t,slotLengdeMinutter:parseInt(e)})),options:[{label:"30 minutter",value:"30"},{label:"45 minutter",value:"45"},{label:"60 minutter",value:"60"},{label:"90 minutter",value:"90"}],disabled:!0}),n.jsx(p,{type:"submit",size:"sm",disabled:s.isPending,children:s.isPending?"Lagrer...":"Lagre endringer"})]})}function K(){const[o,l]=u.useState("info"),i=v();return n.jsx(x,{children:n.jsx(S,{items:[{value:"info",label:"Informasjon",content:n.jsx(T,{slug:i})},{value:"booking",label:"Bookingregler",content:n.jsx(y,{slug:i})}],value:o,onValueChange:l})})}export{K as default};
