import{r as i}from"./shadcn-mOdBhBu9.js";import{u as d,a as y,t as a,b as c,e as k}from"./index-DACapAhf.js";function q(e,s=!0){const n=d(),u=()=>{e&&(n.invalidateQueries({queryKey:["baner",e]}),n.invalidateQueries({queryKey:["baner",e,!0]}),n.invalidateQueries({queryKey:["baner",e,!1]}))},r=y(["baner",e,s],`/klubb/${e}/baner${s?"?inkluderInaktive=true":""}`,{enabled:!!e,staleTime:1e3*60*5,requireAuth:!1}),o=i.useRef(!1);i.useEffect(()=>{if(!r.error){o.current=!1;return}o.current||(a.error(r.error.message??"Kunne ikke hente baner"),o.current=!0)},[r.error]);const p=c("post",`/klubb/${e}/baner`,{onSuccess:()=>{a.success("Bane opprettet"),u()},onError:t=>a.error(t.message??"Kunne ikke opprette bane")}),b=c("put","/",{mutationFn:async({id:t,dto:f})=>{e&&await k.put(`/klubb/${e}/baner/${t}`,f,{requireAuth:!0})},onSuccess:()=>{a.success("Bane oppdatert"),u()},onError:t=>a.error(t.message??"Kunne ikke oppdatere bane")});return{baner:r.data??[],isLoading:r.isLoading,error:r.error,refetch:r.refetch,opprettBane:p,oppdaterBane:b}}export{q as u};
