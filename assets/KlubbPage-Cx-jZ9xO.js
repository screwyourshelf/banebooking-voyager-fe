import{j as t,r as u}from"./shadcn-DDUjAgUv.js";import{u as x}from"./useSlug-jzHxOzW4.js";import{P as c}from"./Page-Cq3gZojq.js";import{S as h}from"./SimpleTabsLazy-zUdAe1-s.js";import{j as S,f as b,L as m,B as p}from"./index-BUxuu0lO.js";import{a as f,F as d}from"./FormField-CW-UCTjA.js";import{S as j}from"./SelectField-CFOnUDG8.js";import"./react-RGnvvjkK.js";import"./lucide-Bc72fHhV.js";import"./index-XHTm-vMi.js";function T({className:i,...l}){return t.jsx("textarea",{"data-slot":"textarea",className:S("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",i),...l})}function y({id:i,label:l,value:s,onChange:o,helpText:a,error:r}){return t.jsx(f,{id:i,label:l,helpText:a,error:r,children:t.jsx(T,{id:i,value:s,onChange:o,className:r?"border-destructive":""})})}function L({slug:i}){const{data:l,isLoading:s,oppdaterKlubb:o}=b(i),[a,r]=u.useState({navn:"",kontaktEpost:"",banereglement:"",latitude:"",longitude:"",feedUrl:"",feedSynligAntallDager:"7"});return u.useEffect(()=>{l&&r({navn:l.navn??"",kontaktEpost:l.kontaktEpost??"",banereglement:l.banereglement??"",latitude:l.latitude?.toString()??"",longitude:l.longitude?.toString()??"",feedUrl:l.feedUrl??"",feedSynligAntallDager:l.feedSynligAntallDager?.toString()??"50"})},[l]),s||!l?t.jsx(m,{}):t.jsxs("form",{className:"space-y-4",onSubmit:e=>{e.preventDefault(),o.mutate({...l,navn:a.navn,kontaktEpost:a.kontaktEpost,banereglement:a.banereglement,latitude:parseFloat(a.latitude),longitude:parseFloat(a.longitude),feedUrl:a.feedUrl,feedSynligAntallDager:parseInt(a.feedSynligAntallDager,10)})},children:[t.jsx(d,{id:"navn",label:"Klubbnavn",value:a.navn,onChange:e=>r(n=>({...n,navn:e.target.value})),helpText:"Navnet på klubben slik det vises utad i Banebooking."}),t.jsx(d,{id:"kontaktEpost",label:"Kontakt-e-post",type:"email",value:a.kontaktEpost,onChange:e=>r(n=>({...n,kontaktEpost:e.target.value})),helpText:"E-postadresse som vises på klubbens infoside. Brukes til henvendelser fra medlemmer og gjester."}),t.jsx(y,{id:"banereglement",label:"Banereglement",value:a.banereglement,onChange:e=>r(n=>({...n,banereglement:e.target.value})),helpText:"Tekst som beskriver klubbens regler for bruk av banene. Vises til brukere når de booker."}),t.jsx(d,{id:"latitude",label:"Latitude (breddegrad)",value:a.latitude,onChange:e=>r(n=>({...n,latitude:e.target.value})),helpText:"Breddegrad for klubbens beliggenhet. Brukes til kartvisning."}),t.jsx(d,{id:"longitude",label:"Longitude (lengdegrad)",value:a.longitude,onChange:e=>r(n=>({...n,longitude:e.target.value})),helpText:"Lengdegrad for klubbens beliggenhet. Brukes til kartvisning."}),t.jsx(d,{id:"feedUrl",label:"RSS-feed (valgfritt)",value:a.feedUrl,onChange:e=>r(n=>({...n,feedUrl:e.target.value})),helpText:"URL til klubbens RSS-feed (f.eks. nyheter). Hvis satt, hentes og vises de nyeste innleggene i appen."}),t.jsx(d,{id:"feedSynligAntallDager",label:"Aldergrense for feedinnslag (dager)",type:"number",min:0,value:a.feedSynligAntallDager,onChange:e=>r(n=>({...n,feedSynligAntallDager:e.target.value})),helpText:"Bestemmer hvor mange dager gamle innslag fra klubbens RSS-feed som skal vises. Sett til 0 for å inkludere alle."}),t.jsx(p,{type:"submit",size:"sm",disabled:o.isPending,children:o.isPending?"Lagrer...":"Lagre endringer"})]})}function g({id:i,label:l,value:s,onChange:o,min:a=0,max:r=10,step:e=1,helpText:n,error:k}){return t.jsx(f,{id:i,label:`${l}: ${s}`,helpText:n,error:k,children:t.jsx("input",{id:i,type:"range",value:s,min:a,max:r,step:e,onChange:v=>o(parseInt(v.target.value)),className:"w-full"})})}function C({slug:i}){const{data:l,isLoading:s,oppdaterKlubb:o}=b(i),[a,r]=u.useState({maksPerDag:1,maksTotalt:2,dagerFremITid:7,slotLengdeMinutter:60,aapningstid:"07:00",stengetid:"22:00"});return u.useEffect(()=>{l?.bookingRegel&&r({...a,...l.bookingRegel})},[l]),s||!l?t.jsx(m,{}):t.jsxs("form",{className:"space-y-4",onSubmit:e=>{e.preventDefault(),o.mutate({...l,bookingRegel:a})},children:[t.jsx(g,{id:"aapningstid",label:"Åpningstid",value:parseInt(a.aapningstid.split(":")[0]),onChange:e=>r(n=>({...n,aapningstid:`${e.toString().padStart(2,"0")}:00`})),min:6,max:23}),t.jsx(g,{id:"stengetid",label:"Stengetid",value:parseInt(a.stengetid.split(":")[0]),onChange:e=>r(n=>({...n,stengetid:`${e.toString().padStart(2,"0")}:00`})),min:6,max:23}),t.jsx(g,{id:"maksPerDag",label:"Maks bookinger per dag",value:a.maksPerDag,onChange:e=>r(n=>({...n,maksPerDag:e})),min:0,max:5}),t.jsx(g,{id:"maksTotalt",label:"Maks aktive bookinger totalt",value:a.maksTotalt,onChange:e=>r(n=>({...n,maksTotalt:e})),min:0,max:10}),t.jsx(g,{id:"dagerFremITid",label:"Dager frem i tid",value:a.dagerFremITid,onChange:e=>r(n=>({...n,dagerFremITid:e})),min:1,max:14}),t.jsx(j,{id:"slotLengdeMinutter",label:"Slot-lengde (minutter)",value:a.slotLengdeMinutter.toString(),onChange:e=>r(n=>({...n,slotLengdeMinutter:parseInt(e)})),options:[{label:"30 minutter",value:"30"},{label:"45 minutter",value:"45"},{label:"60 minutter",value:"60"},{label:"90 minutter",value:"90"}],disabled:!0}),t.jsx(p,{type:"submit",size:"sm",disabled:o.isPending,children:o.isPending?"Lagrer...":"Lagre endringer"})]})}function M(){const[i,l]=u.useState("info"),s=x();return t.jsx(c,{children:t.jsx(h,{items:[{value:"info",label:"Informasjon",content:t.jsx(L,{slug:s})},{value:"booking",label:"Bookingregler",content:t.jsx(C,{slug:s})}],value:i,onValueChange:l})})}export{M as default};
