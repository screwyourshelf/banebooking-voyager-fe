import{r as i}from"./react-Bq13ngtT.js";import{a as f,b as d,d as y,t as a,e as c,m}from"./index-Bs-TkeFL.js";function v(u=!0){const e=f(),n=d(),o=()=>{n.invalidateQueries({queryKey:["baner",e]}),n.invalidateQueries({queryKey:["baner",e,!0]}),n.invalidateQueries({queryKey:["baner",e,!1]})},r=y(["baner",e,u],`/klubb/${e}/baner${u?"?inkluderInaktive=true":""}`,{staleTime:1e3*60*5,requireAuth:!1}),s=i.useRef(!1);i.useEffect(()=>{if(!r.error){s.current=!1;return}s.current||(a.error(r.error.message??"Kunne ikke hente baner"),s.current=!0)},[r.error]);const p=c("post",`/klubb/${e}/baner`,{onSuccess:()=>{a.success("Bane opprettet"),o()},onError:t=>a.error(t.message??"Kunne ikke opprette bane")}),b=c("put","/",{mutationFn:async({id:t,dto:l})=>{await m.put(`/klubb/${e}/baner/${t}`,l,{requireAuth:!0})},onSuccess:()=>{a.success("Bane oppdatert"),o()},onError:t=>a.error(t.message??"Kunne ikke oppdatere bane")});return{baner:r.data??[],isLoading:r.isLoading,error:r.error,refetch:r.refetch,opprettBane:p,oppdaterBane:b}}export{v as u};
