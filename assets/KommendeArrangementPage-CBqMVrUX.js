import{r as x,j as e}from"./shadcn-DDUjAgUv.js";import{u as h}from"./useArrangement-KU-dho4U.js";import{u as j}from"./useSlug-DpUlJmZk.js";import{L as u,B as f,c as p}from"./index-C5bRu15K.js";import{T as D,a as v,b as g,c as d,d as A,e as c}from"./table-Cf8nNQMp.js";import{f as m}from"./datoUtils-Bzity_GL.js";import{A as b,a as w,b as N,c as y,d as T,e as k,f as S,g as C,h as H}from"./alert-dialog-BB1lr-_s.js";import{P as B}from"./Page-Cq3gZojq.js";import"./react-RGnvvjkK.js";import"./useBaner-BoQ7YYBI.js";import"./lucide-Bc72fHhV.js";import"./index-CZuuFr9-.js";function E({tittel:i,onSlett:a,trigger:n}){const[o,s]=x.useState(!1),[t,l]=x.useState(!1),r=async()=>{l(!0);try{await a(),s(!1)}catch{}finally{l(!1)}};return e.jsxs(b,{open:o,onOpenChange:s,children:[e.jsx(w,{asChild:!0,children:n}),e.jsxs(N,{children:[e.jsxs(y,{children:[e.jsx(T,{children:"Avlys arrangement"}),e.jsxs(k,{children:["Er du sikker på at du vil avlyse «",i,"»? Alle tilknyttede bookinger vil slettes."]})]}),e.jsxs(S,{children:[e.jsx(C,{disabled:t,children:"Avbryt"}),e.jsx(H,{variant:"destructive",disabled:t,onClick:r,children:t?"Avlyser...":"Ja, avlys"})]})]})]})}function G(){const i=j(),{arrangementer:a,isLoading:n,slettArrangement:o}=h(i);return e.jsx(B,{children:n?e.jsx(u,{}):a.length===0?e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Ingen arrangementer registrert."}):e.jsx("div",{className:"max-w-full overflow-x-auto border rounded-md",children:e.jsxs(D,{className:"text-sm w-full",children:[e.jsx(v,{children:e.jsxs(g,{children:[e.jsx(d,{className:"w-1/3",children:"Hva"}),e.jsx(d,{className:"w-1/3",children:"Når"}),e.jsx(d,{className:"w-1/3",children:"Om"})]})}),e.jsx(A,{children:a.map(s=>{const t=new Date(s.startDato),l=new Date,r=Math.max(0,Math.ceil((t.getTime()-l.getTime())/(1e3*60*60*24)));return e.jsxs(g,{children:[e.jsx(c,{className:"whitespace-normal break-words",children:e.jsxs("div",{className:"flex justify-between items-start gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.tittel}),s.beskrivelse&&e.jsx("div",{className:"text-muted-foreground text-xs",children:s.beskrivelse})]}),s.kanSlettes&&e.jsx(E,{tittel:s.tittel,onSlett:()=>o(s.id),trigger:e.jsxs(f,{variant:"ghost",size:"icon",className:"text-red-500 hover:bg-red-100",title:"Avlys",children:[e.jsx(p,{className:"w-4 h-4"}),e.jsx("span",{className:"sr-only",children:"Avlys"})]})})]})}),e.jsx(c,{className:"whitespace-normal break-words text-sm",children:s.startDato===s.sluttDato?m(s.startDato):`${m(s.startDato)} - ${m(s.sluttDato)}`}),e.jsxs(c,{children:[r," ",r===1?"dag":"dager"]})]},s.id)})})]})})})}export{G as default};
