import{r as x,j as t,c as q,P as H,l as S,w as K,i as B,k as P,z as O}from"./shadcn-CGWS6Fka.js";import{o as G,f as X,B as E,p as J,q as W,r as Y}from"./index-C3_SJj2x.js";import{u as Q}from"./index-DnnwNeRP.js";import{d as U}from"./lucide-C5rSQBgG.js";function V({slot:e,isOpen:n,erInteraktiv:s,currentUser:i,overrideTitle:a,leftPrefix:r}){const c=`${e.startTid.slice(0,2)}-${e.sluttTid.slice(0,2)}`,o=!!e.arrangementTittel,[l,p]=x.useState(!1);x.useEffect(()=>{const u=()=>p(window.innerWidth<640);return u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]);const b=40,d=e.arrangementBeskrivelse&&l&&e.arrangementBeskrivelse.length>b?e.arrangementBeskrivelse.slice(0,b)+"...":e.arrangementBeskrivelse;return t.jsx("div",{className:"flex items-center",children:t.jsxs("div",{className:"flex flex-1 items-center justify-between min-w-0",children:[t.jsxs("div",{className:"flex items-center min-w-0",children:[r?t.jsx("div",{className:"mr-2 whitespace-nowrap text-xs text-muted-foreground flex items-center gap-1",children:r}):null,t.jsx("div",{className:"whitespace-nowrap font-semibold text-sm text-right pr-1",children:c}),r?null:t.jsx("div",{className:"w-[18px] h-[18px] flex items-center justify-center",children:e.værSymbol?t.jsx("img",{src:`/banebooking-voyager-fe/weather-symbols/svg/${e.værSymbol}.svg`,alt:e.værSymbol,width:18,height:18,className:"select-none",draggable:!1}):t.jsx("span",{className:"invisible",children:"."})}),t.jsx("div",{className:"flex-grow text-sm p-1 min-w-0",children:a?t.jsx("div",{className:"min-w-0 whitespace-nowrap truncate",children:a}):o?t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"font-medium truncate",children:e.arrangementTittel}),d?t.jsx("div",{className:"text-xs text-gray-600 truncate",children:d}):null]}):t.jsx("div",{className:"min-w-0 whitespace-nowrap truncate",children:e.booketAv?i?e.booketAv:Z(e.booketAv):"Ledig"})})]}),s?t.jsx("div",{className:"p-1 shrink-0",children:t.jsx(G,{size:12,style:{transform:n?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},"aria-hidden":"true"})}):t.jsx("div",{className:"p-1 shrink-0"})]})})}function Z(e){const[n,s]=e.split("@");return!n||!s?e:`${n[0]}***@${s}`}var y="Checkbox",[ee,ue]=q(y),[te,_]=ee(y);function re(e){const{__scopeCheckbox:n,checked:s,children:i,defaultChecked:a,disabled:r,form:c,name:o,onCheckedChange:l,required:p,value:b="on",internal_do_not_use_render:d}=e,[u,j]=K({prop:s,defaultProp:a??!1,onChange:l,caller:y}),[k,f]=x.useState(null),[v,m]=x.useState(null),h=x.useRef(!1),w=k?!!c||!!k.closest("form"):!0,g={checked:u,disabled:r,setChecked:j,control:k,setControl:f,name:o,form:c,value:b,hasConsumerStoppedPropagationRef:h,required:p,defaultChecked:C(a)?!1:a,isFormControl:w,bubbleInput:v,setBubbleInput:m};return t.jsx(te,{scope:n,...g,children:ne(d)?d(g):i})}var I="CheckboxTrigger",R=x.forwardRef(({__scopeCheckbox:e,onKeyDown:n,onClick:s,...i},a)=>{const{control:r,value:c,disabled:o,checked:l,required:p,setControl:b,setChecked:d,hasConsumerStoppedPropagationRef:u,isFormControl:j,bubbleInput:k}=_(I,e),f=B(a,b),v=x.useRef(l);return x.useEffect(()=>{const m=r?.form;if(m){const h=()=>d(v.current);return m.addEventListener("reset",h),()=>m.removeEventListener("reset",h)}},[r,d]),t.jsx(S.button,{type:"button",role:"checkbox","aria-checked":C(l)?"mixed":l,"aria-required":p,"data-state":M(l),"data-disabled":o?"":void 0,disabled:o,value:c,...i,ref:f,onKeyDown:P(n,m=>{m.key==="Enter"&&m.preventDefault()}),onClick:P(s,m=>{d(h=>C(h)?!0:!h),k&&j&&(u.current=m.isPropagationStopped(),u.current||m.stopPropagation())})})});R.displayName=I;var A=x.forwardRef((e,n)=>{const{__scopeCheckbox:s,name:i,checked:a,defaultChecked:r,required:c,disabled:o,value:l,onCheckedChange:p,form:b,...d}=e;return t.jsx(re,{__scopeCheckbox:s,checked:a,defaultChecked:r,disabled:o,required:c,onCheckedChange:p,name:i,form:b,value:l,internal_do_not_use_render:({isFormControl:u})=>t.jsxs(t.Fragment,{children:[t.jsx(R,{...d,ref:n,__scopeCheckbox:s}),u&&t.jsx($,{__scopeCheckbox:s})]})})});A.displayName=y;var T="CheckboxIndicator",z=x.forwardRef((e,n)=>{const{__scopeCheckbox:s,forceMount:i,...a}=e,r=_(T,s);return t.jsx(H,{present:i||C(r.checked)||r.checked===!0,children:t.jsx(S.span,{"data-state":M(r.checked),"data-disabled":r.disabled?"":void 0,...a,ref:n,style:{pointerEvents:"none",...e.style}})})});z.displayName=T;var F="CheckboxBubbleInput",$=x.forwardRef(({__scopeCheckbox:e,...n},s)=>{const{control:i,hasConsumerStoppedPropagationRef:a,checked:r,defaultChecked:c,required:o,disabled:l,name:p,value:b,form:d,bubbleInput:u,setBubbleInput:j}=_(F,e),k=B(s,j),f=Q(r),v=O(i);x.useEffect(()=>{const h=u;if(!h)return;const w=window.HTMLInputElement.prototype,N=Object.getOwnPropertyDescriptor(w,"checked").set,D=!a.current;if(f!==r&&N){const L=new Event("click",{bubbles:D});h.indeterminate=C(r),N.call(h,C(r)?!1:r),h.dispatchEvent(L)}},[u,f,r,a]);const m=x.useRef(C(r)?!1:r);return t.jsx(S.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??m.current,required:o,disabled:l,name:p,value:b,form:d,...n,tabIndex:-1,ref:k,style:{...n.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});$.displayName=F;function ne(e){return typeof e=="function"}function C(e){return e==="indeterminate"}function M(e){return C(e)?"indeterminate":e?"checked":"unchecked"}function se({className:e,...n}){return t.jsx(A,{"data-slot":"checkbox",className:X("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...n,children:t.jsx(z,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:t.jsx(U,{className:"size-3.5"})})})}function ae({slot:e,onBook:n=()=>{},onCancel:s=()=>{},onDelete:i=()=>{},time:a,erBekreftet:r,setErBekreftet:c,reset:o=()=>{}}){return t.jsxs("div",{className:"flex flex-col items-end w-full",children:[e.kanBookes&&r!==void 0&&c&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center space-x-1 mb-2 text-sm",children:[t.jsx(se,{id:`book-${a}`,checked:r,onCheckedChange:l=>c(!!l)}),t.jsxs("label",{htmlFor:`book-${a}`,className:"cursor-pointer select-none",children:["Jeg (og de jeg spiller sammen med) har betalt medlemskap for ",new Date().getFullYear()]})]}),t.jsxs(E,{variant:"outline",size:"sm",disabled:!r,onClick:()=>{n(e),o()},className:"flex items-center gap-2 text-sm",children:[t.jsx(J,{}),"Book"]})]}),e.kanAvbestille&&t.jsxs(E,{variant:"outline",size:"sm",onClick:()=>{s(e),o()},className:"flex items-center gap-2 text-sm",children:[t.jsx(W,{}),"Avbestill"]}),e.kanSlette&&t.jsxs(E,{variant:"destructive",size:"sm",onClick:()=>{i(e),o()},className:"flex items-center gap-2 text-sm",children:[t.jsx(Y,{}),"Slett"]})]})}function ie({slot:e,time:n,erBekreftet:s,setErBekreftet:i,onBook:a,onCancel:r,onDelete:c,reset:o}){return t.jsx("div",{className:"mt-1",children:t.jsx("div",{className:"bg-inherit",children:t.jsx(ae,{slot:e,time:n,erBekreftet:s,setErBekreftet:i,onBook:a,onCancel:r,onDelete:c,reset:o})})})}function me({slot:e,currentUser:n,isOpen:s=!1,onToggle:i,onBook:a=()=>{},onCancel:r=()=>{},onDelete:c=()=>{},headerOverrideTitle:o,headerLeftPrefix:l,erInteraktivOverride:p}){const[b,d]=x.useState(!1),u=()=>d(!1),j=`${e.startTid.slice(0,2)}-${e.sluttTid.slice(0,2)}`,k=e.kanBookes||e.kanAvbestille||e.kanSlette,f=p??(!!n&&k&&!e.erPassert),v=!!e.arrangementTittel,m=e.erEier===!0,h=["border rounded shadow-sm p-2 mb-2","transition-colors duration-300 ease-in-out",e.erPassert?"bg-gray-100 text-gray-400":"",!e.erPassert&&v?"bg-gradient-to-r from-blue-0 via-blue-50 to-blue-200 border-blue-200":"",!e.erPassert&&!v?"bg-white text-gray-900":"",n&&m&&!v?"animate__animated animate__headShake animate__slow":""].join(" "),w=()=>{f&&i&&(i(),d(!1))};return t.jsxs("div",{className:h,style:{cursor:f?"pointer":"default",opacity:e.erPassert?.5:1},onClick:g=>{g.target.closest("button, input, label")||w()},role:f?"button":void 0,tabIndex:f?0:void 0,onKeyDown:g=>{f&&(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),w())},children:[t.jsx(V,{slot:e,isOpen:s,erInteraktiv:f,currentUser:n,overrideTitle:o,leftPrefix:l}),s&&!e.erPassert&&t.jsx(ie,{slot:e,time:j,erBekreftet:b,setErBekreftet:d,onBook:a,onCancel:r,onDelete:c,reset:u})]})}export{me as B};
