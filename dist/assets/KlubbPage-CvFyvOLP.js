import{j as e,r as c}from"./shadcn-BfUXmlP3.js";import{e as j,d as f,g as R,L as F,I as o,B as T,t as g,o as S}from"./index-fLnmLxwB.js";import{L as s}from"./label-BjBqwgl-.js";import{S as L,a as C,b as I,c as y,d as u}from"./select-Cb3n96Vq.js";import{C as E,a as N}from"./card-CgPzx-qu.js";import"./react-D5d5vywP.js";import"./lucide-CZTSiasK.js";import"./index-36j8ZHWB.js";function D({className:d,...n}){return e.jsx("textarea",{"data-slot":"textarea",className:j("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",d),...n})}function q(){const{slug:d}=f(),{klubb:n,laster:p}=R(d),[r,l]=c.useState({navn:"",kontaktEpost:"",banereglement:"",latitude:"",longitude:"",feedUrl:"",bookingRegel:{maksPerDag:1,maksTotalt:2,dagerFremITid:7,slotLengdeMinutter:60}}),[k,m]=c.useState(!1);c.useEffect(()=>{var a,t,i,x,b,h;n&&l({navn:n.navn,kontaktEpost:n.kontaktEpost??"",banereglement:n.banereglement??"",latitude:((a=n.latitude)==null?void 0:a.toString())??"",longitude:((t=n.longitude)==null?void 0:t.toString())??"",feedUrl:n.feedUrl??"",bookingRegel:{maksPerDag:((i=n.bookingRegel)==null?void 0:i.maksPerDag)??1,maksTotalt:((x=n.bookingRegel)==null?void 0:x.maksTotalt)??2,dagerFremITid:((b=n.bookingRegel)==null?void 0:b.dagerFremITid)??7,slotLengdeMinutter:((h=n.bookingRegel)==null?void 0:h.slotLengdeMinutter)??60}})},[n]);async function v(a){a.preventDefault(),m(!0);const t={...r};if(t.bookingRegel.maksTotalt<t.bookingRegel.maksPerDag){g.error("Totalt antall bookinger kan ikke vÃ¦re lavere enn maks per dag."),m(!1);return}try{await S(d,{navn:t.navn,kontaktEpost:t.kontaktEpost,banereglement:t.banereglement,latitude:parseFloat(t.latitude),longitude:parseFloat(t.longitude),feedUrl:t.feedUrl,bookingRegel:{...t.bookingRegel}}),g.success("Endringer lagret")}catch(i){i instanceof Error?g.error(i.message):g.error("Ukjent feil")}m(!1)}return p?e.jsx(F,{}):n?e.jsx("div",{className:"max-w-screen-sm mx-auto px-2 py-2",children:e.jsx("form",{onSubmit:v,className:"space-y-4",children:e.jsx(E,{children:e.jsxs(N,{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx(s,{htmlFor:"navn",children:"Navn"}),e.jsx(o,{id:"navn",value:r.navn,onChange:a=>l(t=>({...t,navn:a.target.value}))})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"kontaktEpost",children:"Kontakt-e-post"}),e.jsx(o,{id:"kontaktEpost",type:"email",value:r.kontaktEpost,onChange:a=>l(t=>({...t,kontaktEpost:a.target.value}))})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"banereglement",children:"Banereglement"}),e.jsx(D,{id:"banereglement",rows:3,value:r.banereglement,onChange:a=>l(t=>({...t,banereglement:a.target.value}))})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"latitude",children:"Latitude"}),e.jsx(o,{id:"latitude",value:r.latitude,onChange:a=>l(t=>({...t,latitude:a.target.value}))})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"longitude",children:"Longitude"}),e.jsx(o,{id:"longitude",value:r.longitude,onChange:a=>l(t=>({...t,longitude:a.target.value}))})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"feedUrl",children:"RSS-feed (valgfritt)"}),e.jsx(o,{id:"feedUrl",value:r.feedUrl,onChange:a=>l(t=>({...t,feedUrl:a.target.value}))})]}),e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Bookingregler"}),e.jsxs("div",{children:[e.jsxs(s,{htmlFor:"maksPerDag",children:["Maks bookinger per dag: ",r.bookingRegel.maksPerDag]}),e.jsx("input",{id:"maksPerDag",type:"range",min:0,max:5,step:1,value:r.bookingRegel.maksPerDag,onChange:a=>l(t=>({...t,bookingRegel:{...t.bookingRegel,maksPerDag:parseInt(a.target.value)}})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs(s,{htmlFor:"maksTotalt",children:["Maks aktive bookinger totalt: ",r.bookingRegel.maksTotalt]}),e.jsx("input",{id:"maksTotalt",type:"range",min:0,max:10,step:1,value:r.bookingRegel.maksTotalt,onChange:a=>l(t=>({...t,bookingRegel:{...t.bookingRegel,maksTotalt:parseInt(a.target.value)}})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs(s,{htmlFor:"dagerFremITid",children:["Dager frem i tid tillatt: ",r.bookingRegel.dagerFremITid]}),e.jsx("input",{id:"dagerFremITid",type:"range",min:1,max:14,step:1,value:r.bookingRegel.dagerFremITid,onChange:a=>l(t=>({...t,bookingRegel:{...t.bookingRegel,dagerFremITid:parseInt(a.target.value)}})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"slotLengdeMinutter",children:"Slot-lengde (minutter)"}),e.jsxs(L,{value:r.bookingRegel.slotLengdeMinutter.toString(),onValueChange:a=>l(t=>({...t,bookingRegel:{...t.bookingRegel,slotLengdeMinutter:parseInt(a)}})),disabled:!0,children:[e.jsx(C,{id:"slotLengdeMinutter",disabled:!0,children:e.jsx(I,{})}),e.jsxs(y,{children:[e.jsx(u,{value:"30",children:"30 minutter"}),e.jsx(u,{value:"45",children:"45 minutter"}),e.jsx(u,{value:"60",children:"60 minutter"}),e.jsx(u,{value:"90",children:"90 minutter"})]})]})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx(T,{type:"submit",size:"sm",disabled:k,children:k?"Lagrer...":"Lagre endringer"})})]})})})}):e.jsx("p",{className:"text-sm text-destructive px-2 py-2 text-center",children:"Fant ikke klubb."})}export{q as default};
