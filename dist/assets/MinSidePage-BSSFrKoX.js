import{r as a,j as e}from"./shadcn-BfUXmlP3.js";import{t as C,d as y,S,L as b}from"./index-fLnmLxwB.js";import{b as B}from"./booking-CK-JcRFM.js";import{u as M,T as p,a as f,b as m,c as r,d as k,e as n,f as x}from"./datoUtils-sZSPEnO_.js";import{T as E,a as L,b as N,c as v}from"./useBaner-Ol6D5kQa.js";import{C as T,a as w}from"./card-CgPzx-qu.js";import"./react-D5d5vywP.js";import"./lucide-CZTSiasK.js";function A(o){const[d,h]=a.useState([]),[u,l]=a.useState(!0),[j,i]=a.useState(null),c=a.useCallback(async()=>{if(o)try{l(!0),i(null);const s=await B(o);h(s)}catch(s){const t=s instanceof Error?s.message:"Ukjent feil ved henting";i(t),C.error(t)}finally{l(!1)}},[o]);return a.useEffect(()=>{c()},[c]),{bookinger:d,laster:u,error:j,refetch:c}}function U(){const{slug:o}=y(),d=a.useContext(S)??o,[h,u]=a.useState("bookinger"),{bookinger:l,laster:j}=A(d),{arrangementer:i,isLoading:c}=M(d);return e.jsx("div",{className:"max-w-screen-md mx-auto px-1 py-1",children:e.jsxs(E,{value:h,onValueChange:u,children:[e.jsxs(L,{className:"mb-4",children:[e.jsx(N,{value:"bookinger",children:"Mine bookinger"}),e.jsx(N,{value:"arrangementer",children:"Arrangementer"})]}),e.jsx(v,{value:"bookinger",children:e.jsx(T,{children:e.jsx(w,{className:"p-2 space-y-4",children:j?e.jsx(b,{}):l.length===0?e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Du har ingen kommende bookinger."}):e.jsx("div",{className:"overflow-auto max-h-[60vh] border-b border-x rounded-b-md",children:e.jsxs(p,{className:"text-sm",children:[e.jsx(f,{children:e.jsxs(m,{children:[e.jsx(r,{children:"Dato"}),e.jsx(r,{children:"Tid"}),e.jsx(r,{children:"Bane"})]})}),e.jsx(k,{children:l.map((s,t)=>e.jsxs(m,{children:[e.jsx(n,{children:x(s.dato)}),e.jsxs(n,{children:[s.startTid,"–",s.sluttTid]}),e.jsx(n,{children:s.baneNavn})]},t))})]})})})})}),e.jsx(v,{value:"arrangementer",children:e.jsx(T,{children:e.jsx(w,{className:"p-4 space-y-4",children:c?e.jsx(b,{}):i.length===0?e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Ingen arrangementer registrert."}):e.jsx("div",{className:"overflow-auto max-h-[60vh] border-b border-x rounded-b-md",children:e.jsxs(p,{className:"text-sm",children:[e.jsx(f,{children:e.jsxs(m,{children:[e.jsx(r,{className:"w-1/3",children:"Hva"}),e.jsx(r,{className:"w-1/3",children:"Når"}),e.jsx(r,{className:"w-1/3",children:"Om"})]})}),e.jsx(k,{children:i.map(s=>{const t=new Date(s.startDato),D=new Date,g=Math.max(0,Math.ceil((t.getTime()-D.getTime())/(1e3*60*60*24)));return e.jsxs(m,{children:[e.jsxs(n,{className:"whitespace-normal break-words",children:[e.jsx("div",{className:"font-medium",children:s.tittel}),s.beskrivelse&&e.jsx("div",{className:"text-muted-foreground text-xs whitespace-normal break-words",children:s.beskrivelse})]}),e.jsx(n,{className:"whitespace-normal break-words text-sm",children:s.startDato===s.sluttDato?x(s.startDato):`${x(s.startDato)} - ${x(s.sluttDato)}`}),e.jsxs(n,{className:"whitespace-nowrap",children:[g," ",g===1?"dag":"dager"]})]},s.id)})})]})})})})})]})})}export{U as default};
